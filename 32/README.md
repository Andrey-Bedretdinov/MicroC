# Объяснение кода: Нормальный режим работы таймера с переключением состояния выхода

Этот код демонстрирует настройку и использование таймера `Timer1` в нормальном режиме на микроконтроллере AVR. В данном режиме при переполнении таймера происходит автоматическое изменение состояния на выходе `OC1A` (пин `PB1`).

---

## Особенности настройки

1. **Таймер**:
    - Работает в нормальном режиме (по умолчанию).
    - Срабатывает при переполнении таймера (значение переходит с максимального `0xFFFF` на `0x0000`).

2. **Выход таймера**:
    - Используется пин `PB1` (выход `OC1A`) для отображения изменений состояния.

3. **Частота процессора**:
    - Установлена равной 8 МГц (F_CPU = 8000000).

4. **Предделитель**:
    - Установлен в 1 (CS10), что обеспечивает максимальную скорость работы таймера.

---

## Настройка портов

```c
DDRB |= (1 << PB1); // Настройка PB1 (OC1A) как выход
```

- Устанавливает пин `PB1` как выходной для управления состоянием выхода `OC1A`.

---

## Настройка таймера

### Регистр TCCR1A

```c
TCCR1A |= (1 << COM1A0);
```

- **COM1A0**: Устанавливает режим работы выхода OC1A:
    - При переполнении таймера состояние пина PB1 будет переключаться (из 0 в 1 или из 1 в 0).

---

### Регистр TCCR1B

```c
TCCR1B |= (1 << CS10);
```

- **CS10**: Устанавливает предделитель 1.
    - Таймер работает с тактовой частотой микроконтроллера (8 МГц).
    - Период полного переполнения таймера (16 бит) рассчитывается как:  
      T = 2^16 / F_CPU = 65536 / 8000000 ≈ 8.19 мс.

---

### Режим работы таймера

- Таймер по умолчанию работает в нормальном режиме, при котором:
    - Счетчик TCNT1 увеличивается от 0x0000 до 0xFFFF.
    - После переполнения (перехода от 0xFFFF к 0x0000) автоматически срабатывает переключение состояния на выходе OC1A.

---

## Основной цикл

```c
while (1) {
    // Таймер автоматически изменяет состояние на выходе OC1A
}
```

- Основной цикл пуст, так как управление состоянием пина PB1 полностью выполняется аппаратно через таймер.

---

## Использованные регистры

1. **TCCR1A**:
    - Бит COM1A0: Настройка выхода OC1A для переключения состояния при переполнении таймера.

2. **TCCR1B**:
    - Бит CS10: Устанавливает предделитель 1 (таймер работает на полной тактовой частоте).

3. **DDRB**:
    - Настройка пина PB1 (выход OC1A) как выходного.

---

## Вывод

- На выходе PB1 (OC1A) генерируется сигнал с частотой, зависящей от настроек таймера:  
  F_output = F_CPU / (2 * 2^16 * предделитель).

- В данном случае:  
  F_output = 8000000 / (2 * 65536) ≈ 61.04 Гц.

---

## Примечания

1. **FUSE-бит CLKDIV8**:
    - Если этот бит установлен, тактовая частота делится на 8.
    - Для работы на частоте 8 МГц необходимо, чтобы бит был "не установлен" (Unprogrammed).

2. **Применение**:
    - Такой режим часто используется для генерации прямоугольных сигналов или импульсов с заданной частотой.  